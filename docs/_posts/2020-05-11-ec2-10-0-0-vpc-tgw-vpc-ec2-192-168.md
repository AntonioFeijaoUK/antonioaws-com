---
layout: post
title: Ping from an EC2 instance on private subnet and on different VPC via TGW
categories:
  - ec2
  - networking
tags:
  - tgw
  - vpc
  - networking
  - ec2
---


EC2-10-4-0 on VPC-10-0-0 via TGW via VPC-192-168 with EC2-192-168-4

## VPC1 to TGW to VPC2

- whiteboard [link here](https://awwapp.com/b/u6hxhr9cvgwgw/)

![ec2-vpc-tgw-vpc-ec2-make-it-ping](/assets/images/ec2-vpc-tgw-vpc-ec2-make-it-ping.png)


- <https://docs.aws.amazon.com/vpc/latest/userguide/vpc-subnets-commands-example.html>

## Create a VPC-10-0

```shell

aws ec2 create-vpc --cidr-block 10.0.0.0/16

#VPC_ID=.....
```

## Create subnets with that VPC

```shell

aws ec2 create-subnet --vpc-id ${VPC_ID} --cidr-block 10.0.1.0/24
aws ec2 create-subnet --vpc-id ${VPC_ID} --cidr-block 10.0.2.0/24
aws ec2 create-subnet --vpc-id ${VPC_ID} --cidr-block 10.0.3.0/24

aws ec2 create-subnet --vpc-id ${VPC_ID} --cidr-block 10.0.4.0/24
aws ec2 create-subnet --vpc-id ${VPC_ID} --cidr-block 10.0.5.0/24
aws ec2 create-subnet --vpc-id ${VPC_ID} --cidr-block 10.0.6.0/24
```


# Create a Internet Gateway

```shell

aws ec2 create-internet-gateway

```

.... working in progress
